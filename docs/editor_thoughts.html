<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>editor thoughts
</title>
    <style>
    :root {
  --fg: #222;
}

* {
  color: var(--fg);
}

nav {
  padding: 1em;
}

hr {
  border-top: none;
  border-width: 1px;
  border-color: var(--fg);
}

body {
  max-width: 700px;
  min-height: 100vh;
  margin: auto;
  background-color: #eee;
}

.site_title {
  text-align: center;
  font-family: sans-serif;
  font-weight: 700;
  font-size: 2em;
  color: var(--fg);
  text-decoration: none;
  line-height: 1;
}

article {
  background-color: white;
  padding-right: 1em;
  padding-left: 1em;
  padding-bottom: 1em;
  margin: auto;
  border: 1px solid var(--fg);
}

article h1, h2, h3, h4, h5 {
  font-family: sans-serif;
  line-height: .75;
}

article h1:not(.article_title) {
  border-bottom: 1px solid var(--fg);
  padding-bottom: 0.2em;
}

article h2 {
  font-size: 1.35em;
}

article time {
  font-family: sans-serif;
  font-weight: bold;
}

article section {
  font-family: serif;
}

figure img {
  max-width: 100%;
}

figcaption {
  padding: 2px;
  font-family: serif;
  text-align: center;
}
    </style>
    </head>
    <body>
        <nav>
            <a class="site_title" href="/">wooo.sh</a>
        </nav>
        <article>
            <h1 class="article_title">editor thoughts
</h1>
            <time>Posted on 2020.07.28
</time>
            <hr>
            <p>I want to write my own editor, partially for experience, but also because other
editors annoy me. There are a few major problems I have with existing editors:</p>

<ul>
<li>They use some language for extension that is awkward to use (lua, vimscript,
elisp)</li>
<li>Moving by words is not well suited to coding</li>
<li>Macros are complicated</li>
<li>Modal editing is inefficient, and most non-modal editors use confusing
keybinds</li>
<li>They are no longer just text/code editors, due to feature creep</li>
</ul>

<p>I aim to solve this issues in my editor, although I'm sure it will be worse in
different ways to existing editors.</p>

<h1>Extension Language</h1>

<p>All existing editors with an extension language I know of use a new language for
extension/customization (except 4coder, which supports C++). The problem with
this is that these languages are often designed in weird ways that make doing
anything remotely complex difficult.</p>

<h1>Moving By Words</h1>

<p>Most editors currently let you move by line, character, word, or by finding a
given string (including go to definition). This seems great until you realize
that moving by words in a programming language is stupid, because programming
languages are made up of tokens.</p>

<p>Here's an example of moving by &quot;words&quot; in vim: (each <code>|</code> represents a cursor
position)</p>
<pre style="background-color:#fff">|printf|(&#34;%|s|\|n|&#34;, |my_string|);
</pre>
<p>I'm not exactly sure why it <code>&quot;%</code> or <code>&quot;,</code>, but its proves my point that moving
by words in code doesn't make any sense. The solution here is to move to the end
of each token, which is defined per language:</p>
<pre style="background-color:#fff">|printf|(|&#34;|%s|\n|&#34;|,| |my_string|)|;|
</pre>
<p><strong>NOTE</strong>: Both <code>%s</code> and <code>\n</code> are recognized as tokens within the string</p>

<h1>Non-Modal Editing</h1>

<p>I find modal editing to be ineffiecient, because it often ends up taking more
time than just pressing control (and maybe even shift) and some other key.
Instead, I prefer to use keybinds based on combining control, shift, arrow keys,
pgup/pgdown, and home/end. These keybindings already work in every GUI toolkit
(GTK2/3, QT, web browsers, etc), and are extremely simple to remember
(ctrl to move a word, shift to extend selection). Most other functions are used
rather infrequently compared to basic movement, so I'm fine with having them be
their own keybinding (such as save, save as, find, macro mode).</p>

<h1>Macros</h1>

<p>Due to the lack of command/extension language, macros are slightly challenging.
In my editor, you use ctrl-m-n to start defining a macro, then ctrl-i to define
a insertion point/parameter, then ctrl-m again to end macro definition,
then you can either type a name, or hit enter to save it to the &quot;temporary&quot;
macro.</p>

<p>Then to use a macro, you do ctrl-m macro_name (or hit enter instead of a macro
name for the temporary macro), then use tab to move between input fields.</p>

<p>A good example of the repetitve usecase macros are good for:</p>
<pre style="background-color:#fff"><span style="">char</span> *token_type_str(<span style="font-weight:bold">enum</span> token_type t) {
  <span style="font-weight:bold">switch</span> (t) {
  <span style="font-weight:bold">case</span> t_lparen:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">&#39;(&#39;</span><span style="font-style:italic">&#34;</span>;
  <span style="font-weight:bold">case</span> t_rparen:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">&#39;)&#39;</span><span style="font-style:italic">&#34;</span>;
  <span style="font-weight:bold">case</span> t_lbrace:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">&#39;{&#39;</span><span style="font-style:italic">&#34;</span>;
  <span style="font-weight:bold">case</span> t_rbrace:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">&#39;}&#39;</span><span style="font-style:italic">&#34;</span>;
  <span style="font-weight:bold">case</span> t_comma:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">&#39;,&#39;</span><span style="font-style:italic">&#34;</span>;
  <span style="font-weight:bold">case</span> t_literal:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">integer literal</span><span style="font-style:italic">&#34;</span>;
  <span style="font-weight:bold">case</span> t_identifier:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">identifier</span><span style="font-style:italic">&#34;</span>;
  <span style="font-weight:bold">case</span> t_EOF:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">EOF</span><span style="font-style:italic">&#34;</span>
  <span style="font-weight:bold">default</span>:
    <span style="font-weight:bold">return</span> <span style="font-style:italic"></span><span style="font-style:italic">&#34;</span><span style="font-style:italic">unknown</span><span style="font-style:italic">&#34;</span>;
  };
}
</pre>
<p>You could define a macro like so:</p>
<pre style="background-color:#fff">&lt;ctrl-m&gt;case t_&lt;ctrl-i&gt;:
    return &#34;&lt;ctrl-i&gt;&#34;;&lt;ctrl-m&gt;&lt;ret&gt;
</pre>
<p>and then use it:</p>
<pre style="background-color:#fff">&lt;ctrl-m&gt;&lt;ret&gt;lparen&lt;tab&gt;&#39;(&#39;&lt;tab&gt;
</pre>
<p>to create:</p>
<pre style="background-color:#fff">case t_lparen:
  return &#34;&#39;(&#39;&#34;;
</pre>
<h1>Feature Creep</h1>

<p>Emacs is famous for feature creep, but other editors also suffer from this,
including features such as:</p>

<ul>
<li>Terminal multiplexer/window manager</li>
<li>A build system</li>
<li>A file browser</li>
<li>A fancy git ui (not built in, but many people use a plugin for it)</li>
</ul>

<p>I firmly believe that all of these should be seperate components, after all,
why would I want to learn a new windowing system if I want to switch editors?
It is relatively easy to set up a pseudo-IDE with a basic text editor like nano,
tmux and a terminal file manager (such as cfm). I'm not sure why people think
editors are UI toolkits.</p>

<h1>Overall Feature Set</h1>

<p>To recap, these features should be implemented:</p>

<ul>
<li>LSP support</li>
<li>Code folding</li>
<li>Regexes</li>
<li>Syntax highlighting</li>
<li>Movement and selection with ctrl, shift, arrow keys, pgup/pgdown, and home/end</li>
<li>Support for plugins in any language that have C bindings</li>
<li>Find (and replace)</li>
<li>Automatic identation detection</li>
<li>A basic config file</li>
<li>Macros</li>
</ul>

<p>Things that will not be features:</p>

<ul>
<li>A file browser</li>
<li>A windowing system (including tabs)</li>
<li>A custom extension language</li>
</ul>

        </article>
    </body>
</html>
